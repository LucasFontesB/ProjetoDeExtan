package application;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.time.LocalDateTime;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class App extends Application{

    public static void main(String[] args) {
       LocalDateTime data_hora_atual = LocalDateTime.now();
       System.out.println("Registrando Horário Inicial No Registra Turno...\n");
	   String sql_registrar_horario_registra_turno = "INSERT INTO registros_turnos (horario_inicio, id_usuario) VALUES (?, ?)";
       PreparedStatement ps_registrar_horario_registra_turno = null;
       Connection conn_registrar_horario_registra_turno = null;
       
       try {
     	   conn_registrar_horario_registra_turno = Conectar_Banco_Dados.getConnection();
           System.out.println("Conexão estabelecida com sucesso para Registrar Horário No Registra Turno: " + (conn_registrar_horario_registra_turno != null));
           ps_registrar_horario_registra_turno = conn_registrar_horario_registra_turno.prepareStatement(sql_registrar_horario_registra_turno);
           ps_registrar_horario_registra_turno.setObject(1, data_hora_atual);
           ps_registrar_horario_registra_turno.setInt(2, id_usuario);
           ps_registrar_horario_registra_turno.executeUpdate();
           
           System.out.println("Horário Resgistrado Com Sucesso\n");
       }catch (Exception erro_ao_definir_usuario_logado) {
     	  erro_ao_definir_usuario_logado.printStackTrace();
       }
       
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("/views/tela_login.fxml"));
        Parent root = fxmlLoader.load();
        Scene tela = new Scene(root);
        
        primaryStage.setTitle("Gerenciador De Passeios");
        primaryStage.setScene(tela);
        primaryStage.show();
    }
}
